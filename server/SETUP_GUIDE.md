# –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö messenger

## –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏:

```bash
docker exec -it messenger-db psql -U messenger_user -d messenger
```

–¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ `messenger=#`

## –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã

–°–∫–æ–ø–∏—Ä—É–π –∏ –≤—Å—Ç–∞–≤—å –≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `init_database.sql` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª psql.

–ò–ª–∏, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞:

```bash
# –°–∫–æ–ø–∏—Ä—É–π init_database.sql –≤ –ø–∞–ø–∫—É server/sql/
# –ó–∞—Ç–µ–º –≤ psql –≤—ã–ø–æ–ª–Ω–∏:
\i server/sql/init_database.sql
```

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:

```sql
\dt
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- users
- contacts  
- messages

## –®–∞–≥ 3: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ö—ç—à –ü–ò–ù-–∫–æ–¥–∞

–í—ã–π–¥–∏ –∏–∑ psql (–∫–æ–º–∞–Ω–¥–∞ `\q`) –∏ –ø–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É server:

```bash
cd server
```

–°–æ–∑–¥–∞–π –ø–∞–ø–∫—É utils (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç):

```bash
mkdir -p utils
```

–°–∫–æ–ø–∏—Ä—É–π —Ñ–∞–π–ª `hash-pin.js` –≤ `server/utils/hash-pin.js`

–ó–∞–ø—É—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ö—ç—à–∞ –¥–ª—è –ü–ò–ù 1234 (–∏–ª–∏ —Å–≤–æ–µ–≥–æ):

```bash
node utils/hash-pin.js 1234
```

–°–∫–æ–ø–∏—Ä—É–π –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ö—ç—à (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ `$2b$10$...`)

## –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í–µ—Ä–Ω–∏—Å—å –≤ psql:

```bash
docker exec -it messenger-db psql -U messenger_user -d messenger
```

–í—Å—Ç–∞–≤—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∑–∞–º–µ–Ω–∏ <–¢–í–û–ô_–•–≠–®> –Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ö—ç—à):

```sql
INSERT INTO users (phone, display_name, password_hash)
VALUES ('+79990000000', '–°–µ–Ω—è', '<–¢–í–û–ô_–•–≠–®>');

INSERT INTO users (phone, display_name, password_hash)
VALUES ('+79990000001', '–ú–∞–º–∞', '<–¢–í–û–ô_–•–≠–®>');
```

–ü—Ä–æ–≤–µ—Ä—å:

```sql
SELECT id, phone, display_name FROM users;
```

## –®–∞–≥ 5: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã

```sql
INSERT INTO contacts (username, display_name, is_online)
VALUES ('senya', '–°–µ–Ω—è', TRUE);

INSERT INTO contacts (username, display_name, is_online)
VALUES ('mama', '–ú–∞–º–∞', TRUE);
```

–ü—Ä–æ–≤–µ—Ä—å:

```sql
SELECT * FROM contacts;
```

## –®–∞–≥ 6: –í—ã–π—Ç–∏ –∏–∑ psql –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

–í—ã–π–¥–∏ –∏–∑ psql:

```sql
\q
```

–ó–∞–ø—É—Å—Ç–∏ backend (–∏–∑ –ø–∞–ø–∫–∏ server):

```bash
node index.js
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
Server listening on http://localhost:4000
```

## –®–∞–≥ 7: –ó–∞–ø—É—Å—Ç–∏—Ç—å frontend

–í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:

```bash
npm install  # –µ—Å–ª–∏ –µ—â–µ –Ω–µ –¥–µ–ª–∞–ª
npm run dev
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ `http://localhost:5173`

## –®–∞–≥ 8: –í–æ–π—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π `http://localhost:5173`
2. –í–≤–µ–¥–∏ —Ç–µ–ª–µ—Ñ–æ–Ω: `+79990000000`
3. –í–≤–µ–¥–∏ –ü–ò–ù: `1234` (–∏–ª–∏ —Ç–æ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª)
4. –ù–∞–∂–º–∏ Login

–î–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Å–ª–µ–≤–∞!

## –ì–æ—Ç–æ–≤–æ! üéâ

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å:
- –í—ã–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç –≤ —Å–ø–∏—Å–∫–µ —Å–ª–µ–≤–∞
- –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É - —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ